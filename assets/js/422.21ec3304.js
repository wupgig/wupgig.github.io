(window.webpackJsonp=window.webpackJsonp||[]).push([[422],{789:function(t,a,s){"use strict";s.r(a);var e=s(47),r=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"mysql-压缩版"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mysql-压缩版"}},[t._v("#")]),t._v(" MySQL 压缩版")]),t._v(" "),s("h2",{attrs:{id:"写在前面的话"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#写在前面的话"}},[t._v("#")]),t._v(" 写在前面的话")]),t._v(" "),s("p",[t._v("有些软件对于安装路径有一定的要求，例如：路径中不能有空格，不能有中英文，不能有特殊符号，等等。")]),t._v(" "),s("p",[t._v("为了避免不必要的麻烦，也懒得一一辨别踩坑，我们人为作出『"),s("strong",[t._v("统一的约定")]),t._v("』：")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("安装版的软件，一律安装在软件的默认安装路径，不要去改变它。"),s("small",[t._v("默认在哪就是哪，别动。")])])]),t._v(" "),s("li",[s("p",[t._v("解压版的软件，一律安装在："),s("strong",[t._v("D:\\ProgramFiles")]),t._v(" 。这是一个没中文、没空格的路径！")])])]),t._v(" "),s("p",[t._v("MySQL 的安装"),s("small",[t._v("（无论是安装版，还是解压版）")]),t._v("，都依赖于所安装的电脑上要安装 "),s("code",[t._v("Visual C++ Redistributable")]),t._v("。"),s("a",{attrs:{href:"https://www.microsoft.com/en-us/download/details.aspx?id=40784",target:"_blank",rel:"noopener noreferrer"}},[t._v("下载链接"),s("OutboundLink")],1)]),t._v(" "),s("h2",{attrs:{id:"下载、解压-mysql"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#下载、解压-mysql"}},[t._v("#")]),t._v(" 下载、解压 mysql")]),t._v(" "),s("p",[t._v("下载，略。")]),t._v(" "),s("p",[t._v("解压到 "),s("strong",[t._v("D:\\ProgramFiles")]),t._v(" 目录下。")]),t._v(" "),s("h2",{attrs:{id:"添加缺省的配置文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#添加缺省的配置文件"}},[t._v("#")]),t._v(" 添加缺省的配置文件")]),t._v(" "),s("p",[t._v("mysql 解压的文件中默认没有两个关键性的东西："),s("strong",[t._v("my.ini")]),t._v(" 文件和 "),s("strong",[t._v("data")]),t._v(" 目录。")]),t._v(" "),s("p",[t._v("在 mysql 的解压目录/安装目录下的根目录下创建 "),s("strong",[t._v("my.ini")]),t._v(" 文件，并添置以下内容：")]),t._v(" "),s("div",{staticClass:"language-properties extra-class"},[s("pre",{pre:!0,attrs:{class:"language-properties"}},[s("code",[t._v("[client]\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("port")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("3306")]),t._v("\n\n[mysql]\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("default-character-set")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("utf8")]),t._v("\n\n[mysqld]\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("port")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("3306")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("basedir")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("D:\\ProgramFiles\\mysql-5.7.24-winx64")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("datadir")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("D:\\ProgramFiles\\mysql-5.7.24-winx64\\data")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("character_set_server")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("utf8mb4")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("default-storage-engine")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("INNODB")]),t._v("\n")])])]),s("p",[t._v("各配置项解释如下：")]),t._v(" "),s("div",{staticClass:"language-properties extra-class"},[s("pre",{pre:!0,attrs:{class:"language-properties"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## CLIENT SECTION")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## ---------------------------------------------------------")]),t._v("\n[client]\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("port")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("3306                       设置 mysql 客户端连接服务端时默认使用的端口")]),t._v("\n\n[mysql]\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("default-character-set")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("utf8      设置 mysql 客户端默认使用的字符集")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## SERVER SECTION")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## ---------------------------------------------------------")]),t._v("\n[mysqld]\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("port")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("3306                       mysql 服务端监听/占用的端口")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("basedir")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("D:\\ProgramFiles\\mysql-5.7.24-winx64         mysql 的安装路径")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("datadir")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("D:\\ProgramFiles\\mysql-5.7.24-winx64\\data    mysql 数据库数据文件所在路径")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("character_set_server")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("utf8mb4    新建 schema 或 table 时默认使用的字符集")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("default-storage-engine")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("INNODB   新建 table 时默认使用的引擎")]),t._v("\n")])])]),s("blockquote",[s("p",[s("small",[t._v("注意，此处的 basedir 和 datadir 要符合实际情况中 MySQL 的解压路径。")])])]),t._v(" "),s("h2",{attrs:{id:"初始化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#初始化"}},[t._v("#")]),t._v(" 初始化")]),t._v(" "),s("blockquote",[s("p",[t._v("由于后续要使用到 MySQL 解压目录下的 "),s("em",[s("code",[t._v("bin")])]),t._v(" 目录下的各种命令，方便起见，可以新建 "),s("em",[s("code",[t._v("MYSQL_HOME")])]),t._v(" 环境变量，并将其下的 "),s("em",[s("code",[t._v("bin")])]),t._v(" 目录添加到环境变量 "),s("em",[s("code",[t._v("path")])]),t._v(" 中。")])]),t._v(" "),s("p",[t._v("在终端中输入，"),s("em",[s("code",[t._v("mysqld --initialize")])]),t._v("，回车后可见在 mysql 解压目录中生成了 data 文件夹。")]),t._v(" "),s("p",[s("strong",[t._v("注意")]),t._v("：在 data 文件夹中，有一个 "),s("code",[t._v(".err")]),t._v(" 文件，其中的内容包含了（最后一行）初始的 root 用户的密码，类似如下：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2019")]),t._v("-01-09T08:11:05.817097Z "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Note"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" A temporary password is generated "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" root@localhost: ?ds:i+"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("4C/wo\n")])])]),s("p",[t._v("上例中，其中 "),s("code",[t._v("?ds:i+)4C/wo")]),t._v(" 就是 root 用户的初始密码。")]),t._v(" "),s("h2",{attrs:{id:"启动-mysql-服务端"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动-mysql-服务端"}},[t._v("#")]),t._v(" 启动 MySQL 服务端")]),t._v(" "),s("p",[t._v("执行命令启动 MySQL 服务端")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("d:"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("ProgramFiles"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("mysql-5.7.24-winx64"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("bin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("mysqld\n")])])]),s("p",[t._v("注意，执行的是 "),s("em",[s("code",[t._v("myslqd")])]),t._v("，而不是 "),s("em",[s("code",[t._v("mysql")])]),t._v(" 。它们两个是不同的东西，不要执行错了。")]),t._v(" "),s("h2",{attrs:{id:"修改密码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#修改密码"}},[t._v("#")]),t._v(" 修改密码")]),t._v(" "),s("p",[t._v("启动 mysql，通过 "),s("em",[s("code",[t._v("mysql -uroot -p")])]),t._v(" 进行连接/登录"),s("small",[t._v("（使用默认的初始密码）")]),t._v("，然后可通过以下命令进行修改 root 用户密码：")]),t._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("set")]),t._v(" password "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" root"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@localhost")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("password"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'新密码'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("最后输入："),s("strong",[t._v('show variables like "character%";')]),t._v(" 确保字符集编码是 UTF8 编码。")]),t._v(" "),s("h2",{attrs:{id:"确认-mysql-编码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#确认-mysql-编码"}},[t._v("#")]),t._v(" 确认 mysql 编码")]),t._v(" "),s("p",[t._v("mysql 的默认编码是 latin1，可通过下面命令查看确认：")]),t._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("show")]),t._v(" variables "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("like")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'character%'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("如果显示结果中出现 latin1，则通过修改配置文件 "),s("em",[s("code",[t._v("my.ini")])]),t._v(" 进行配置：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("[mysqld]\n## 新建 schema 或 table 时默认使用的字符集\ncharacter_set_server=utf8\n")])])]),s("h2",{attrs:{id:"可选操作-注册成-windows-服务-非必须"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#可选操作-注册成-windows-服务-非必须"}},[t._v("#")]),t._v(" 可选操作: 注册成 Windows 服务"),s("small",[t._v("（非必须）")])]),t._v(" "),s("p",[t._v("在终端中输入："),s("em",[s("code",[t._v("mysqld --install")])]),t._v("，安装 mysql 服务。")]),t._v(" "),s("p",[t._v("另外，反向的卸载/删除操作中，使用命令 "),s("em",[s("code",[t._v("mysqld --remove")])]),t._v("，卸载前记得要停止 mysqld 。")]),t._v(" "),s("p",[t._v("可以通过以下命令启动/停止 mysql 服务端。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("net start mysql\nnet stop mysql\n")])])])])}),[],!1,null,null,null);a.default=r.exports}}]);