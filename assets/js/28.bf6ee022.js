(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{397:function(n,t,s){"use strict";s.r(t);var a=s(47),e=Object(a.a)({},(function(){var n=this,t=n.$createElement,s=n._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[s("h1",{attrs:{id:"docker-nginx"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker-nginx"}},[n._v("#")]),n._v(" Docker Nginx")]),n._v(" "),s("p",[n._v("docker hub 网址："),s("a",{attrs:{href:"https://hub.docker.com/_/nginx",target:"_blank",rel:"noopener noreferrer"}},[s("em",[n._v("https://hub.docker.com/_/nginx")]),s("OutboundLink")],1),n._v(" 。")]),n._v(" "),s("p",[n._v("当前"),s("small",[n._v("（2021-04-02）")]),n._v(" "),s("strong",[n._v("latest")]),n._v(" 版本和 "),s("strong",[n._v("1.19.9")]),n._v(" 版本是同一个版本；"),s("strong",[n._v("stable")]),n._v(" 版本和 "),s("strong",[n._v("1.18.0")]),n._v(" 版本是同一个版本。")]),n._v(" "),s("h2",{attrs:{id:"_1-安装及测试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-安装及测试"}},[n._v("#")]),n._v(" 1. 安装及测试")]),n._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 查询中央仓库")]),n._v("\ndocker search -f is-official"),s("span",{pre:!0,attrs:{class:"token operator"}},[n._v("=")]),n._v("true mysql\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 从中央仓库下载")]),n._v("\ndocker pull nginx:1.18.0\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 或，直接导入已有的镜像文件")]),n._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# docker load -i nginx-1.1.18.0.tar")]),n._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 查看本地镜像")]),n._v("\ndocker images\n")])])]),s("p",[n._v("会出现类似如下内容：")]),n._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("REPOSITORY    TAG       IMAGE ID       CREATED        SIZE\nnginx         1.18.0    b9e1dc12387a   2 months ago   133MB\nnginx         1.19.9    7ce4f91ef623   2 days ago     133MB\n")])])]),s("p",[n._v("运行容器：")]),n._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 删除曾经已有的同名容器")]),n._v("\ndocker stop nginx-test\ndocker "),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("rm")]),n._v(" nginx-test\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 创建并运行 nginx 容器的语法")]),n._v("\ndocker run "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("\\")]),n._v("\n    -d "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("\\")]),n._v("\n    --name "),s("span",{pre:!0,attrs:{class:"token operator"}},[n._v("<")]),n._v("指定容器名"),s("span",{pre:!0,attrs:{class:"token operator"}},[n._v(">")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("\\")]),n._v("\n    -p "),s("span",{pre:!0,attrs:{class:"token operator"}},[n._v("<")]),n._v("指定宿主机端口"),s("span",{pre:!0,attrs:{class:"token operator"}},[n._v(">")]),n._v(":80 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("\\")]),n._v(" \n    nginx:1.18.0\n")])])]),s("p",[n._v("例如：")]),n._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[n._v("docker run "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("\\")]),n._v("\n    -d "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("\\")]),n._v("\n    --name nginx-test "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("\\")]),n._v("\n    -p "),s("span",{pre:!0,attrs:{class:"token number"}},[n._v("80")]),n._v(":80 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("\\")]),n._v(" \n    nginx:1.16.1\n")])])]),s("p",[n._v("验证安装成功")]),n._v(" "),s("ul",[s("li",[s("p",[n._v("通过 "),s("strong",[n._v("docker ps")]),n._v(" 命令查看容器的运行信息：")]),n._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[n._v("docker "),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("ps")]),n._v("\n")])])]),s("p",[n._v("会看到类似如下信息:")]),n._v(" "),s("p",[n._v("略")])]),n._v(" "),s("li",[s("p",[n._v("访问 nginx 主页")]),n._v(" "),s("p",[n._v("启动容器后，访问 "),s("strong",[n._v("http://宿主机IP:80")]),n._v(" 能看到 Nginx 的欢迎界面： "),s("strong",[n._v("Welcome to nginx!")])])])]),n._v(" "),s("h2",{attrs:{id:"_2-容器中的配置文件和数据的存储"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-容器中的配置文件和数据的存储"}},[n._v("#")]),n._v(" 2. 容器中的配置文件和数据的存储")]),n._v(" "),s("p",[n._v("Docker Nginx 的配置文件是容器中的")]),n._v(" "),s("div",{staticClass:"language-text extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("/etc/nginx/nginx.conf\n")])])]),s("p",[n._v("Docker Nginx 的日志目录是容器中的")]),n._v(" "),s("div",{staticClass:"language-text extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("/var/log/nginx/\n")])])]),s("p",[n._v("Docker Nginx 的静态资源文件目录是容器中的")]),n._v(" "),s("div",{staticClass:"language-text extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("/usr/share/nginx/html\n")])])]),s("h2",{attrs:{id:"_3-配置与挂载"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-配置与挂载"}},[n._v("#")]),n._v(" 3. 配置与挂载")]),n._v(" "),s("ul",[s("li",[s("p",[n._v("删除已存在的同名容器")]),n._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[n._v("docker stop nginx-80\ndocker "),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("rm")]),n._v(" nginx-80\n")])])]),s("p",[n._v("后续可通过 "),s("em",[n._v("docker run")]),n._v(" 的 "),s("strong",[n._v("--rm")]),n._v(" 选项免去『删除』这步操作。")])]),n._v(" "),s("li",[s("p",[n._v("在宿主机上创建目录及配置文件。")]),n._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[n._v("mkdir")]),n._v(" -p ~/docker/nginx/80/log\n"),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("touch")]),n._v(" ~/docker/nginx/80/nginx.conf\n")])])])]),n._v(" "),s("li",[s("p",[n._v("创建并运行容器")]),n._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[n._v("docker run  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("\\")]),n._v("\n    -d  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("\\")]),n._v("\n    --rm "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("\\")]),n._v("\n    --name nginx-80 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("\\")]),n._v("\n    -p "),s("span",{pre:!0,attrs:{class:"token number"}},[n._v("80")]),n._v(":80 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("\\")]),n._v("\n    -v ~/docker/nginx/80/nginx.conf:/etc/nginx/nginx.conf:ro "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("\\")]),n._v("\n    -v ~/docker/nginx/80/log:/var/log/nginx "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("\\")]),n._v("\n    nginx:1.18.0\n")])])])])]),n._v(" "),s("hr"),n._v(" "),s("p",[n._v("以下内容是 nginx 配置文件的默认内容：")]),n._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('user  nginx;\nworker_processes  1;\n\nerror_log  /var/log/nginx/error.log warn;\npid        /var/run/nginx.pid;\n\nevents {\n    worker_connections  1024;\n}\n\nhttp {\n    include       /etc/nginx/mime.types;\n    default_type  application/octet-stream;\n\n    log_format  main  \'$remote_addr - $remote_user [$time_local] "$request" \'\n                      \'$status $body_bytes_sent "$http_referer" \'\n                      \'"$http_user_agent" "$http_x_forwarded_for"\';\n\n    access_log  /var/log/nginx/access.log  main;\n\n    sendfile        on;\n    #tcp_nopush     on;\n\n    keepalive_timeout  65;\n\n    #gzip  on;\n\n    include /etc/nginx/conf.d/*.conf;\n}\n')])])]),s("h2",{attrs:{id:"_4-docker-compose-启动"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-docker-compose-启动"}},[n._v("#")]),n._v(" 4. docker-compose 启动")]),n._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[n._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(":")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[n._v("'3'")]),n._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[n._v("services")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(":")]),n._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[n._v("nginx")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(":")]),n._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[n._v("image")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(":")]),n._v(" nginx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(":")]),n._v("stable\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[n._v("container_name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(":")]),n._v(" nginx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("-")]),n._v("zgg\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[n._v("volumes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(":")]),n._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("-")]),n._v(" ~/docker/nginx/80/logs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(":")]),n._v("/etc/nginx/logs\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("-")]),n._v(" ~/docker/nginx/80/nginx.conf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(":")]),n._v("/etc/nginx/nginx.conf\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("-")]),n._v(" ~/docker/nginx/80/html"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(":")]),n._v("/usr/share/nginx/html\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[n._v("ports")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(":")]),n._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("-")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token datetime number"}},[n._v("80:80")]),n._v("\n")])])])])}),[],!1,null,null,null);t.default=e.exports}}]);