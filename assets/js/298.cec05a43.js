(window.webpackJsonp=window.webpackJsonp||[]).push([[298],{666:function(t,e,a){"use strict";a.r(e);var s=a(47),n=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"自定义简单的条件查询"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自定义简单的条件查询"}},[t._v("#")]),t._v(" 自定义简单的条件查询")]),t._v(" "),a("p",[t._v("spring-data-jap 还有一个功能非常实用：可以根据方法名自动生产 SQL。比如 "),a("code",[t._v(".findByUserName()")]),t._v(" 会自动生产一个以 "),a("code",[t._v("userName")]),t._v(" 为参数的查询方法。只需要在我们自定义的 Repository 中创建好方法，使用的时候直接将接口注入到类中调用即可。")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("根据用户名查询用户：")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findByUserName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" userName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("也可以加一些关键字 And、or：")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findByUserNameOrEmail")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" username， "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" email"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("修改、删除、统计也是类似语法：")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("deleteByUserName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" userName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("countByUserName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" userName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("基本上 SQL 体系中的关键词都可以使用，如 LIKE 、IgnoreCase、OrderBy：")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findByEmailLike")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" email"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findByUserNameIgnoreCase")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" userName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findByUserNameOrderByEmailDesc")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" email"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])]),t._v(" "),a("p",[t._v("可以根据查询的条件不断地添加和拼接，Spring Boot 都可以正确解析和执行，其他使用示例例可以参考下表。")]),t._v(" "),a("p",[a("strong",[t._v("具体的关键字，使用方法和生产成 SQL 如下表所示")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v("Keyword")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("Sample")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("JPQL snippet")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("And")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("findByLastnameAndFirstname")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("… where x.lastname = ?1 and x.firstname  = ?2")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("Or")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("findByLastnameOrFirstname")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("… where x.lastname = ?1 or x.firstname = ?2")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("Is, Equals")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("findByFirstnameIs, "),a("br"),t._v("findByFirstnameEquals")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("… where x.firstname = ?1")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("Between")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("findByStartDateBetween")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("… where x.startDate between ?1 and ?2")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("LessThan")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("findByAgeLessThan")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("… where x.age < ?1")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("LessThanEqual")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("findByAgeLessThanEqual")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("… where x.age <= ?1")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("GreaterThan")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("findByAgeGreaterThan")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("… where x.age > ?1")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("GreaterThanEqual")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("findByAgeGreaterThanEqual")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("… where x.age >= ?1")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("After")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("findByStartDateAfter")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("… where x.startDate > ?1")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("Before")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("findByStartDateBefore")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("… where x.startDate < ?1")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("IsNull")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("findByAgeIsNull")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("… where x.age is null")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("IsNotNull, NotNull")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("findByAge(Is)NotNull")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("… where x.age not null")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("Like")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("findByFirstnameLike")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("… where x.firstname like ?1")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("NotLike")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("findByFirstnameNotLike")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("… where x.firstname not like ?1")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("StartingWith")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("findByFirstnameStartingWith")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("… where x.firstname like ?1 (parameter bound with appended %)")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("EndingWith")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("findByFirstnameEndingWith")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("… where x.firstname like ?1 (parameter bound with prepended %)")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("Containing")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("findByFirstnameContaining")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("… where x.firstname like ?1 (parameter bound wrapped in %)")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("OrderBy")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("findByAgeOrderByLastnameDesc")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("… where x.age = ?1 order by x.lastname desc")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("Not")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("findByLastnameNot")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("… where x.lastname <> ?1")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("In")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("findByAgeIn(Collection ages)")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("… where x.age in ?1")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("NotIn")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("findByAgeNotIn(Collection age)")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("… where x.age not in ?1")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("TRUE")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("findByActiveTrue()")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("… where x.active = true")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("FALSE")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("findByActiveFalse()")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("… where x.active = false")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("IgnoreCase")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("findByFirstnameIgnoreCase")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("… where UPPER(x.firstame) = UPPER(?1)")])])])])])}),[],!1,null,null,null);e.default=n.exports}}]);