(window.webpackJsonp=window.webpackJsonp||[]).push([[342],{710:function(r,v,e){"use strict";e.r(v);var t=e(47),n=Object(t.a)({},(function(){var r=this,v=r.$createElement,e=r._self._c||v;return e("ContentSlotsDistributor",{attrs:{"slot-key":r.$parent.slotKey}},[e("h1",{attrs:{id:"spring-父子容器的概念和-spring-mvc-两次加载时机"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#spring-父子容器的概念和-spring-mvc-两次加载时机"}},[r._v("#")]),r._v(" Spring 父子容器的概念和 Spring MVC 两次加载时机")]),r._v(" "),e("h2",{attrs:{id:"spring-mvc-的-2-次加载和-spring-ioc-父子容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#spring-mvc-的-2-次加载和-spring-ioc-父子容器"}},[r._v("#")]),r._v(" Spring MVC 的 2 次加载和 Spring IoC 父子容器")]),r._v(" "),e("p",[r._v("在 Spring MVC 的配置中我们提到 Spring MVC 有 2 次加载配置文件的时机：")]),r._v(" "),e("ul",[e("li",[e("p",[r._v("第一次是通过 "),e("strong",[r._v("ContextLoaderListener")]),r._v(" 进行加载；")])]),r._v(" "),e("li",[e("p",[r._v("第二次是通过 "),e("strong",[r._v("DispatcherServlet")]),r._v(" 进行加载。")])])]),r._v(" "),e("p",[r._v("在这里，你的项目中先后创建了 2 个 Spring IoC 容器：")]),r._v(" "),e("ul",[e("li",[e("p",[r._v("第一次加载时机所创建的 Spring IoC 容器习惯性被称作 Spring 容器，它是父容器；")])]),r._v(" "),e("li",[e("p",[r._v("第二次加载时机所创建的 Spring IoC 容器习惯性被称作 Spring Web 容器，它是子容器。")])])]),r._v(" "),e("p",[r._v("父容器-子容器的关系类似于父类-子类的关系：子容器中的对象能引用（"),e("small",[e("strong",[r._v("@Autowired")])]),r._v("）父容器中的 Java Bean，但是反之则不行。")]),r._v(" "),e("blockquote",[e("p",[r._v("当然，同一容器内的 Java Bean 之间的 "),e("strong",[r._v("@Autowired")]),r._v(" 是毫无问题的。")])]),r._v(" "),e("p",[r._v("结合我们平时在项目中的 MVC 三层的依赖关系和顺序：DAO 层被 Service 所使用，Service 层 Web 层所使用，所以，我们常见的配置的惯例是：")]),r._v(" "),e("ul",[e("li",[e("p",[r._v("将 DAO 层和 Servic 层的 Java Bean 配置、创建在 "),e("strong",[r._v("ContextLoaderListener")]),r._v(" 所创建的父容器中；")])]),r._v(" "),e("li",[e("p",[r._v("将 Web 层和 Java Bean 配置、创建在 "),e("strong",[r._v("DispatcherServlet")]),r._v(" 所创建的子容器中；")])])]),r._v(" "),e("p",[r._v("这样，能确保 Web 层的 "),e("strong",[r._v("@Controller")]),r._v(" 能正常地 "),e("strong",[r._v("@Autowired")]),r._v(" Service 层的 Java Bean 。")])])}),[],!1,null,null,null);v.default=n.exports}}]);