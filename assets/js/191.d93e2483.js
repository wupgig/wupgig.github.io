(window.webpackJsonp=window.webpackJsonp||[]).push([[191],{559:function(t,a,s){"use strict";s.r(a);var e=s(47),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"gradle"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#gradle"}},[t._v("#")]),t._v(" Gradle")]),t._v(" "),s("p",[t._v("Gradle 是一种依赖管理工具"),s("small",[t._v("（和 Ant、Maven 是同一类工具）")]),t._v("，基于 Groovy 语言，面向 Java 应用为主，它抛弃了基于 XML 的各种繁琐配置，取而代之的是一种基于 Groovy 的内部『"),s("strong",[t._v("领域特定语言")]),t._v(" "),s("small",[t._v("DSL")]),t._v("』。它提供灵活的通用构建工具，同时完美兼容Maven 仓库。")]),t._v(" "),s("blockquote",[s("p",[t._v("Gradle 作为第三代项目构建技术、工具，它的“名场面”是 Android 使用它"),s("small",[t._v("（替代了 Maven）")]),t._v("作为项目构建工具。")])]),t._v(" "),s("h2",{attrs:{id:"gradle-的下载"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#gradle-的下载"}},[t._v("#")]),t._v(" Gradle 的下载")]),t._v(" "),s("p",[t._v("在官网 "),s("a",{attrs:{href:"https://gradle.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://gradle.org/"),s("OutboundLink")],1),t._v(" 可以下载 gradle 的各个版本。现列举如下：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"left"}},[t._v("版本")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("binary-only")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("v6.7.1")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[s("a",{attrs:{href:"https://downloads.gradle-dn.com/distributions/gradle-6.7.1-bin.zip",target:"_blank",rel:"noopener noreferrer"}},[t._v("下载"),s("OutboundLink")],1)])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("v6.7")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[s("a",{attrs:{href:"https://downloads.gradle-dn.com/distributions/gradle-6.7-bin.zip",target:"_blank",rel:"noopener noreferrer"}},[t._v("下载"),s("OutboundLink")],1)])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("v6.6.1")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[s("a",{attrs:{href:"https://downloads.gradle-dn.com/distributions/gradle-6.6.1-bin.zip",target:"_blank",rel:"noopener noreferrer"}},[t._v("下载"),s("OutboundLink")],1)])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("v6.6")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[s("a",{attrs:{href:"https://downloads.gradle-dn.com/distributions/gradle-6.6-bin.zip",target:"_blank",rel:"noopener noreferrer"}},[t._v("下载"),s("OutboundLink")],1)])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("v6.5.1")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[s("a",{attrs:{href:"https://downloads.gradle-dn.com/distributions/gradle-6.5.1-bin.zip",target:"_blank",rel:"noopener noreferrer"}},[t._v("下载"),s("OutboundLink")],1)])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("v6.5")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[s("a",{attrs:{href:"https://downloads.gradle-dn.com/distributions/gradle-6.5-bin.zip",target:"_blank",rel:"noopener noreferrer"}},[t._v("下载"),s("OutboundLink")],1)])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("v6.4.1")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[s("a",{attrs:{href:"https://downloads.gradle-dn.com/distributions/gradle-6.4.1-bin.zip",target:"_blank",rel:"noopener noreferrer"}},[t._v("下载"),s("OutboundLink")],1)])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("v6.4")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[s("a",{attrs:{href:"https://downloads.gradle-dn.com/distributions/gradle-6.4-bin.zip",target:"_blank",rel:"noopener noreferrer"}},[t._v("下载"),s("OutboundLink")],1)])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("v6.3")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[s("a",{attrs:{href:"https://downloads.gradle-dn.com/distributions/gradle-6.3-bin.zip",target:"_blank",rel:"noopener noreferrer"}},[t._v("下载"),s("OutboundLink")],1)])])])]),t._v(" "),s("p",[t._v("下载后，按惯例，我们将 gradle 解压到 "),s("em",[t._v("D:\\ProgramFiles")]),t._v(" 目录下。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://hemiao3000.gitee.io/java-note-img/images/maven/img/gradle-00.png",alt:"gradle-00"}})]),t._v(" "),s("h2",{attrs:{id:"gradle-配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#gradle-配置"}},[t._v("#")]),t._v(" Gradle 配置")]),t._v(" "),s("p",[t._v("添加 Gradle 环境变量"),s("small",[t._v("（目的是未来可以在命令行中使用 gradle 命令）")]),t._v("。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://hemiao3000.gitee.io/java-note-img/images/maven/img/gradle-01.png",alt:"gradle-01"}})]),t._v(" "),s("p",[t._v("在系统变量中新建变量 GRADLE_HOME，变量值为 gradle 的安装目录，并在 Path 变量中添加一项值：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[t._v("%GRADLE_HOME%\\bin\n")])])]),s("p",[s("img",{attrs:{src:"https://hemiao3000.gitee.io/java-note-img/images/maven/img/gradle-02.png",alt:"gradle-02"}})]),t._v(" "),s("p",[t._v("配置完成后打开 cmd 窗口，输入：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[t._v("gradle -version\n")])])]),s("p",[t._v("若出现版本信息则表示环境配置成功：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://hemiao3000.gitee.io/java-note-img/images/maven/img/gradle-03.png",alt:"gradle-03"}})]),t._v(" "),s("h2",{attrs:{id:"gradle-构建系统的基本概念"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#gradle-构建系统的基本概念"}},[t._v("#")]),t._v(" Gradle 构建系统的基本概念")]),t._v(" "),s("p",[t._v("『"),s("strong",[t._v("项目")]),t._v("』"),s("small",[t._v("（Project）")]),t._v("和『"),s("strong",[t._v("任务")]),t._v("』"),s("small",[t._v("（tasks）")]),t._v("，Gradle 里的任何东西都是基于这两个基础概念。")]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("项目")]),t._v(" 通常是指我们的构建产物，比如 .jar包。"),s("small",[t._v("当然它还可以是一个 "),s("strong",[t._v("行为")]),t._v(" ，例如：将应用程序部署到生产环境。")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("任务")]),t._v(" 是指不可分的最小工作单元，执行构建工作，比如 compile 项目或 run 测试代码。")])]),t._v(" "),s("li",[s("p",[t._v("每一个构建"),s("small",[t._v("（build）")]),t._v("都是由一个或多个 project 构成的，每一个 project 是由一个或多个 tasks 构成的，一个 task 是指不可分的最小工作单元。")])])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("Build\n│── Project 1\n│   ├── Task a\n│   ├── Task b\n│   ├── ... \n│   └── Task n\n│── Project 2\n│── ...\n└── Project n\n")])])]),s("h2",{attrs:{id:"gradle-构建系统的组成"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#gradle-构建系统的组成"}},[t._v("#")]),t._v(" Gradle 构建系统的组成")]),t._v(" "),s("p",[t._v("任何一个构建系统都是由多个构建文件组成：")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("Ant 需要你提供一个名为 build.xmlM 的文件；")])]),t._v(" "),s("li",[s("p",[t._v("Maven 需要你提供一个名为 pom.xml 的文件；")])]),t._v(" "),s("li",[s("p",[t._v("C 语言的 Make 需要你提供一个名为 makefile 的文件。")])])]),t._v(" "),s("p",[t._v("这些文件"),s("small",[t._v("（构建脚本）")]),t._v("定义了一系列的规则来指定项目编译流程。")]),t._v(" "),s("p",[t._v("Gradle 的构建系统需要你提供 2 个必要文件和 1 个非必要文件：")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("build.gradle 必需")]),t._v(" "),s("p",[t._v("构建脚本。这个脚本定义了一个模块和编译用的 tasks，它一般是放在项目的模块中，也可以放在项目的根目录用来作为编译结构全局设置。")])]),t._v(" "),s("li",[s("p",[t._v("settings.gradle 必需")]),t._v(" "),s("p",[t._v("它描述了哪一个模块需要参与构建。如果是多模块的构建，那么必须在多模块结构的根目录中加入这个设置文件。")])]),t._v(" "),s("li",[s("p",[t._v("gradle.properties 非必需")]),t._v(" "),s("p",[t._v("用来配置构建属性。")])])]),t._v(" "),s("h2",{attrs:{id:"hello-world"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hello-world"}},[t._v("#")]),t._v(" Hello World")]),t._v(" "),s("p",[t._v("Gradle 是基于 Groovy 语言的构建系统，所以在构建脚本中可以使用 Groovy 语言来执行一些任务。")]),t._v(" "),s("p",[t._v("下面编写一个简单的 "),s("em",[s("strong",[t._v("build.gradle")])]),t._v(" 文件，定义一个 "),s("em",[s("strong",[t._v("task")])]),t._v(" 来打印 hello world，如下所示：")]),t._v(" "),s("div",{staticClass:"language-groovy extra-class"},[s("pre",{pre:!0,attrs:{class:"language-groovy"}},[s("code",[t._v("task hello "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 先定义一个 hello 的 task")]),t._v("\n    doLast "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 实现 doLast 方法。这个名字不能随便乱叫的。")]),t._v("\n        println "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Hello world!'")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("然后在终端中运行 "),s("code",[t._v("gradle hello")]),t._v(" 命令来执行这个 task，就会看到以下输入内容：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" gradle hello\n\n// 输出结果：\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Task :hello\nHello world"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("\n")])])]),s("p",[s("strong",[t._v("doLast")]),t._v(" 是 gradle 提供访问 task 任务的一个 API ，类似的 API 还有 "),s("strong",[t._v("doFirst")]),t._v(" 。")]),t._v(" "),s("p",[t._v("当一个 task 被执行的时候，"),s("strong",[t._v("doFirst")]),t._v(" 和 "),s("strong",[t._v("doLast")]),t._v(" 会在 task 本身被执行之后执行。并且，doFirst 要限于 doLast 执行，例如：")]),t._v(" "),s("div",{staticClass:"language-groovy extra-class"},[s("pre",{pre:!0,attrs:{class:"language-groovy"}},[s("code",[t._v("task hello "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// hello 这个 task 本身要执行的逻辑")]),t._v("\n    println "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Hello World'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nhello"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("doFirst "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    println "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Hello First 1'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nhello"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("doFirst "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    println "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Hello First 2'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nhello"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("doLast "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    println "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Hello Last 1'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nhello"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("doLast "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("    \n    println "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Hello Last 2'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("输入如下所示：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" gradle hello\n\n// 输出结果\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Task :hello\nHello First "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\nHello First "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\nHello Last "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\nHello Last "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n")])])]),s("h2",{attrs:{id:"task-之间的依赖关系"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#task-之间的依赖关系"}},[t._v("#")]),t._v(" Task 之间的依赖关系")]),t._v(" "),s("p",[t._v("在 Gradle 中各个 task 并不是孤立的，它们可以是相互依赖的。要让一个 task 依赖另外一个task，只需要在 task 定义时加入 "),s("code",[t._v("dependsOn:")]),t._v(" 说明即可，"),s("strong",[t._v("被依赖的 task 会优先依赖者被执行")]),t._v("，例如：")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("示例一：")]),t._v(" "),s("div",{staticClass:"language-groovy extra-class"},[s("pre",{pre:!0,attrs:{class:"language-groovy"}},[s("code",[t._v("task hello "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    println "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Hello'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\ntask "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("world")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dependsOn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" hello"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    println "),s("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"world"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("执行结果：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("gradle world\n\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Configure project "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v("\nHello\nworld\n")])])])]),t._v(" "),s("li",[s("p",[t._v("示例二：")]),t._v(" "),s("div",{staticClass:"language-groovy extra-class"},[s("pre",{pre:!0,attrs:{class:"language-groovy"}},[s("code",[t._v("task hello "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    doLast "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        println "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Hello'")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\ntask "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("world")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dependsOn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" hello"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    doLast "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        println "),s("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"world"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("结果：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("gradle world\n\n> Task :hello\nHello\n\n> Task :world\nworld\n")])])])])]),t._v(" "),s("h2",{attrs:{id:"gradle-插件的概念"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#gradle-插件的概念"}},[t._v("#")]),t._v(" Gradle 插件的概念")]),t._v(" "),s("p",[t._v("和 Maven 一样，Gradle 的所有的特性都由 Gradle 插件提供的"),s("small",[t._v("（这些插件无非就是『官方插件』和『第三方插件』的区别）")]),t._v("。")]),t._v(" "),s("p",[t._v("每当你使用了一个插件，这个插件会将许多 task 自动的加入到你项目里。")]),t._v(" "),s("p",[t._v("Gradle 本身提供了一系列的标准插件"),s("small",[t._v("（即官方插件）")]),t._v("，对于官方插件，无需多余配置只需要在你的 "),s("em",[s("strong",[t._v("build.gradle")])]),t._v(" 文件中的 plugins 中加入插件的 ID，例如：")]),t._v(" "),s("div",{staticClass:"language-groovy extra-class"},[s("pre",{pre:!0,attrs:{class:"language-groovy"}},[s("code",[t._v("plugins "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    id "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'java'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("还有一种“老式”的写法：")]),t._v(" "),s("div",{staticClass:"language-groovy extra-class"},[s("pre",{pre:!0,attrs:{class:"language-groovy"}},[s("code",[t._v("apply plugin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'java'")]),t._v("\n")])])]),s("blockquote",[s("p",[t._v("当然，这两种写法不仅仅是新写法、老写法的问题，它们还是有一些细节上的区别的，这里，我们暂不深究。")])]),t._v(" "),s("p",[t._v("常见的 Gradle 的 task ：")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("gradle build: 编译整个项目，它会执行代码编译、代码检测和单元测试等")])]),t._v(" "),s("li",[s("p",[t._v("gradle assemble: 编译并打包你的代码, 但是并不运行代码检测和单元测试")])]),t._v(" "),s("li",[s("p",[t._v("gradle clean: 删除 build 生成的目录和所有生成的文件")])]),t._v(" "),s("li",[s("p",[t._v("gradle check: 编译并测试你的代码。其它的插件会加入更多的检查步骤，如使用 checkstyle、pmd、findbugs 等。")])])]),t._v(" "),s("blockquote",[s("p",[t._v("Gradle 中的 task 等价于 maven 中的『命令』。")])]),t._v(" "),s("h2",{attrs:{id:"外部依赖"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#外部依赖"}},[t._v("#")]),t._v(" 外部依赖")]),t._v(" "),s("p",[t._v("通常, 一个 Java 项目将有许多外部的依赖, 既指向外部的 .jar 文件. 为了在项目里引用这些 .jar 文件, 你需要告诉 Gradle 去哪里找它们。在 Gradle 中, .jar 文件位于一个在线的中央仓库中，这里的仓库类似于 maven 的仓库。")]),t._v(" "),s("p",[t._v("首先，指定 maven 的仓库地址：")]),t._v(" "),s("div",{staticClass:"language-groovy extra-class"},[s("pre",{pre:!0,attrs:{class:"language-groovy"}},[s("code",[t._v("repositories "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mavenCentral")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("由于 gradle 完全兼容 maven 的中央仓库，上述的配置的作用显而易见：从 maven 中央仓库下载 .jar 包。")]),t._v(" "),s("div",{staticClass:"language-groovy extra-class"},[s("pre",{pre:!0,attrs:{class:"language-groovy"}},[s("code",[t._v("dependencies "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  implementation "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'org.slf4j:slf4j-api:1.7.25'")]),t._v("\n  runtimeOnly "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mysql:mysql-connector-java'")]),t._v("\n  providedCompile "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'javax.servlet:javax.servlet-api:4.0.1'")]),t._v("\n  testCompile "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'junit:junit:4.12'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("blockquote",[s("p",[t._v("老式的写法并非如此，此处不展示。")])]),t._v(" "),s("ul",[s("li",[s("p",[t._v("implementation: 等同于 maven 中的 compile 依赖")])]),t._v(" "),s("li",[s("p",[t._v("runtimeOnly: 等同于 maven 中的 runtime 依赖")])]),t._v(" "),s("li",[s("p",[t._v("providedCompile: 等同于 maven 中的 provided 依赖")])]),t._v(" "),s("li",[s("p",[t._v("testCompile: 等同于 maven 中的 test 依赖")])])]),t._v(" "),s("h2",{attrs:{id:"项目依赖"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#项目依赖"}},[t._v("#")]),t._v(" 项目依赖")]),t._v(" "),s("p",[t._v("往往一个完整的项目由多个子项目构成。在 maven 中，这就是『多模块』项目。")]),t._v(" "),s("p",[t._v("在 gradle 中，使用文件 *"),s("strong",[t._v("settings.gradle")]),t._v(" 定义当前项目的子项目。默认情况下，每个子项目的名称对应着当前操作系统目录下的一个子目录。")]),t._v(" "),s("div",{staticClass:"language-groovy extra-class"},[s("pre",{pre:!0,attrs:{class:"language-groovy"}},[s("code",[t._v("include "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'gradle-example-1'")]),t._v("\ninclude "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'gradle-example-2'")]),t._v("\ninclude "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'gradle-example-3'")]),t._v("\n")])])]),s("p",[t._v("可以可以简写成：")]),t._v(" "),s("div",{staticClass:"language-groovy extra-class"},[s("pre",{pre:!0,attrs:{class:"language-groovy"}},[s("code",[t._v("include "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'gradle-example-1'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'gradle-example-2'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'gradle-example-3'")]),t._v("\n")])])]),s("p",[t._v("如果子项目之间有依赖关系，那么，可以写成：")]),t._v(" "),s("div",{staticClass:"language-groovy extra-class"},[s("pre",{pre:!0,attrs:{class:"language-groovy"}},[s("code",[t._v("dependencies "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("implementation")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("project")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("':gradle-example-1'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])}),[],!1,null,null,null);a.default=n.exports}}]);